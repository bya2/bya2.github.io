---
title: \[네트워크\] CORS(교차 출처 리소스 공유)

categories:
  - Network
tags:
  - [http, cors]

toc: true
toc-sticky: true

date: 2021-09-06
last_modified_at: 2021-09-06
---

CORS(교차 출처 리소스 공유)에 대한 정리

# 정의

> 추가 HTTP 헤더를 사용하여, 한 출처에서 실행 중인 웹 애플리케이션이 다른 출처의 선택한 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 체제.

웹 애플리케이션은 리소스가 자신의 출처(도메인, 프로토콜, 포트)와 다를 때 교차 출처 HTTP 요청을 실행합니다.
{: .notice}

> 교차 출처 리소스 공유 표준은 웹 브라우저에서 해당 정보를 읽는 것이 허용된 출처를 서버에서 설명할 수 있는 새로운 HTTP 헤더를 추가함으로써 동작합니다.  
  추가적으로, 서버 데이터에 부수 효과(side effect)를 일으킬 수 있는 HTTP 요청 메서드(GET을 제외한 HTTP 메서드)에 대해, CORS 명세는 브라우저가 요청을 OPTIONS 메서드로 "프리플라이트"(preflight, 사전 전달)하여 지원하는 메서드를 요청하고, 서버의 "허가"가 떨어지면 실제 요청을 보내도록 요구하고 있습니다.  
  또한 서버는 클라이언트에게 요청에 "인증정보"(쿠키, HTTP 인증)를 함께 보내야 한다고 알려줄 수도 있습니다.

# 개요

> 최신 브라우저는 헤더와 정책 집행을 포함한 클라이언트 측 교차 출처 공유를 처리합니다. 그러나 CORS 표준에 맞춘다는 것은 서버에서도 새로운 요청과 응답 헤더를 처리해야 한다는 것입니다.

# Origin(출처)란?

protocol + host + port (in url)  
ex) https://www.google.com:443/  
즉, 서버의 위치에 찾아가기 위해 필요한 가장 기본적인 것들을 합쳐놓은 것
{: .notice}

출처 내의 포트 번호는 생략이 가능한데, 이는 각 웹에서 사용하는 HTTP, HTTPS 프로토콜의 기본 포트 번호가 정해져있기 때문입니다.

그러나 만약 https://google.com:443/과 같은 출처에 포토 번호가 명시적으로 포함되어 있다면 이 포트 번호까지 모두 일치해야 같은 출처라고 인정이 됩니다. 하지만 이 케이스에 대한 명확한 정의가 표준으로 정해진 것은 아니기 때문에 어떤 경우에는 같은 출처, 어떤 경우에는 다른 출처로 판단될 수 있습니다.

우리는 브라우저의 개발자 도구의 콘솔에서 Location 객체가 가지고 있는 origin 프로퍼티에 접근함으로써 손쉽게 애플리케이션이 실행되고 있는 출처를 알아낼 수도 있습니다.
{: .notice}

교차 출처는 '**다른 출처**'라고도 할 수 있습니다.

CORS 덕분에 우리가 이곳저곳에서 가져오는 리소스들이 안전하다는 최소한의 보장을 받을 수 있습니다.

# 참고 자료

[Mozilla](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS)
